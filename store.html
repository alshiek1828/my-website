<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…ØªØ·ÙˆØ±</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <style>
    body { background: #f8f9fa; }
    .navbar-brand { font-size: 1.8rem; font-weight: bold; }
    #addProductForm {
      background: #fff; padding: 1.5rem;
      border-radius: .75rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
      display: none; /* ÙŠØ¸Ù‡Ø± Ù„Ù„Ù…Ø´Ø±Ù ÙÙ‚Ø· */
    }
    .product-card {
      transition: transform .2s;
      border: none; border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      height: 100%;
      display: flex; flex-direction: column;
    }
    .product-card:hover { transform: translateY(-5px); }
    .product-card img { height: 180px; object-fit: cover; }
    .rating span { cursor: pointer; font-size: 1.2rem; color: #ccc; }
    .rating span.checked { color: gold; }
    footer { background: #343a40; color: #fff; padding: 1.5rem 0; }
    footer .social a {
      color: #fff; margin: 0 .5rem;
      font-size: 1.2rem; text-decoration: none;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand" href="#">Ø³ÙˆÙ‚Ù†Ø§ Ø§Ù„Ù…ØªØ·ÙˆØ±</a>
      <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#authModal" id="authBtn">
        ØªØ³Ø¬ÙŠÙ„ / Ø¯Ø®ÙˆÙ„
      </button>
    </div>
  </nav>

  <div class="container">

    <!-- Add Product Form (Admin only) -->
    <div id="addProductForm">
      <h4 class="mb-3">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h4>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label" for="productName">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
          <input type="text" id="productName" class="form-control" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù‡Ø§ØªÙ Ø°ÙƒÙŠ">
        </div>
        <div class="col-md-4">
          <label class="form-label" for="productPrice">$ Ø§Ù„Ø³Ø¹Ø±</label>
          <input type="number" id="productPrice" class="form-control" placeholder="Ù…Ø«Ù„Ø§Ù‹: 499">
        </div>
        <div class="col-md-4">
          <label class="form-label" for="productImage">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</label>
          <input type="file" id="productImage" class="form-control" accept="image/*">
        </div>
        <div class="col-12">
          <label class="form-label" for="productDesc">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
          <textarea id="productDesc" class="form-control" rows="2" placeholder="Ø£Ø¶Ù ÙˆØµÙÙ‹Ø§ Ù…Ø®ØªØµØ±Ù‹Ø§"></textarea>
        </div>
        <div class="col-12 text-end">
          <button class="btn btn-success" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
        </div>
      </div>
    </div>

    <!-- Products Grid -->
    <div class="row" id="productsList">
      <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
    </div>

  </div>

  <!-- Auth Modal -->
  <div class="modal fade" id="authModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="modal-title text-center mb-3" id="authTitle">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h5>
        <form id="authForm">
          <div class="mb-3">
            <label class="form-label" for="userName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
            <input type="text" id="userName" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" required>
          </div>
          <div class="mb-3">
            <label class="form-label" for="userEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
            <input type="email" id="userEmail" class="form-control" placeholder="example@domain.com" required>
          </div>
          <div class="mb-3">
            <label class="form-label" for="userPass">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6+ Ø£Ø­Ø±Ù)</label>
            <input type="password" id="userPass" class="form-control" minlength="6" required>
          </div>
          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-link" id="switchAuth">Ù„Ø¯ÙŠ Ø­Ø³Ø§Ø¨</button>
            <button type="submit" class="btn btn-primary" id="authSubmit">Ø¥Ù†Ø´Ø§Ø¡</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Footer & Social -->
  <footer class="mt-5">
    <div class="container text-center">
      <p>ğŸ“± ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ø¨Ø±:</p>
      <div class="social">
        <a href="https://instagram.com/" target="_blank">Instagram</a>|
        <a href="https://t.me/" target="_blank">Telegram</a>|
        <a href="https://tiktok.com/@smartsite0" target="_blank">TikTok</a>|
        <a href="https://youtube.com/@smartsite0" target="_blank">YouTube</a>
      </div>
      <small class="d-block mt-3">&copy; 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</small>
    </div>
  </footer>

  <script>
    let currentUser = null;
    const adminEmail = "admin@site.com"; // Ø¹Ø¯Ù‘Ù„ Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø®ØµØµ Ù„Ù„Ù…Ø´Ø±Ù
    const products = [];

    // ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ØªØ³Ø¬ÙŠÙ„ ÙˆØ¯Ø®ÙˆÙ„
    document.getElementById("switchAuth").onclick = () => {
      const isLogin = document.getElementById("authSubmit").innerText === "Ø¯Ø®ÙˆÙ„";
      document.getElementById("authTitle").innerText = isLogin ? "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨" : "ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„";
      document.getElementById("authSubmit").innerText = isLogin ? "Ø¥Ù†Ø´Ø§Ø¡" : "Ø¯Ø®ÙˆÙ„";
      document.getElementById("userName").parentElement.style.display = isLogin ? "block" : "none";
    };

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„/Ø§Ù„Ø¯Ø®ÙˆÙ„
    document.getElementById("authForm").onsubmit = e => {
      e.preventDefault();
      const email = document.getElementById("userEmail").value.trim();
      const pass  = document.getElementById("userPass").value;
      const name  = document.getElementById("userName").value.trim();
      const btn   = document.getElementById("authSubmit").innerText;

      if (btn === "Ø¥Ù†Ø´Ø§Ø¡") {
        // ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
        currentUser = { name, email };
        alert(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${name}! Ø­Ø³Ø§Ø¨Ùƒ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡.`);
      } else {
        // ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ (Ù…Ø­Ø§ÙƒØ§Ø©)
        if (currentUser && currentUser.email === email && pass) {
          alert(`Ø£Ù‡Ù„Ø§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ${currentUser.name}!`);
        } else {
          return alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø·Ø£ Ø£Ùˆ Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯.");
        }
      }
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
      bootstrap.Modal.getInstance(document.getElementById("authModal")).hide();
      document.getElementById("authBtn").innerText = currentUser.name;
      if (currentUser.email === adminEmail) {
        document.getElementById("addProductForm").style.display = "block";
      }
    };

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ (Ù„Ù„Ù…Ø´Ø±Ù ÙÙ‚Ø·)
    function addProduct() {
      const name  = document.getElementById("productName").value.trim();
      const price = document.getElementById("productPrice").value.trim();
      const desc  = document.getElementById("productDesc").value.trim();
      const imgF  = document.getElementById("productImage").files[0];
      if (!name||!price||!desc||!imgF) return alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©");
      const reader = new FileReader();
      reader.onload = e => {
        products.push({ name, price, desc, image: e.target.result, rating:0, rated:false });
        renderProducts();
      };
      reader.readAsDataURL(imgF);
      clearForm();
    }

    function renderProducts() {
      const container = document.getElementById("productsList");
      container.innerHTML = "";
      products.forEach((p,i)=>{
        const col = document.createElement("div");
        col.className = "col-md-4 mb-4";
        col.innerHTML = `
          <div class="card product-card h-100">
            <img src="${p.image}" class="card-img-top">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${p.name}</h5>
              <p class="card-text flex-grow-1">${p.desc}</p>
              <p class="fw-bold mb-2">$ ${p.price}</p>
              <div class="rating mb-3">
                â­ ØªÙ‚ÙŠÙŠÙ…:
                ${[...Array(5)].map((_,idx)=>
                  `<span class="${idx<p.rating?'checked':''}" onclick="rate(${i},${idx+1})">â˜…</span>`
                ).join("")}
              </div>
              <button class="btn btn-primary mt-auto" onclick="addToCart(${i})">ğŸ›’ Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
            </div>
          </div>`;
        container.appendChild(col);
      });
    }

    function rate(index,val) {
      if (!products[index].rated) {
        products[index].rating=val;
        products[index].rated=true;
        renderProducts();
      }
    }

    const cart=[];
    function addToCart(i){
      cart.push(products[i]);
      alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© "${products[i].name}" Ø¥Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚.`);
    }

    function clearForm(){
      ["productName","productPrice","productDesc","productImage"].forEach(id=>{
        const el=document.getElementById(id);
        el.value="";
      });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
