<!DOCTYPE html><html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>بوابة الألعاب والاختبارات الموسعة</title>
  <style>
    /* Reset */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #1c1c1c, #2b2b2b);
      color: #fff; direction: rtl;
      display: flex; flex-direction: column;
    }
    header, footer { text-align: center; padding: 20px; }
    header h1 { font-size: 2.5em; color: #00ffe7; text-shadow: 0 0 10px #00ffe7; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; margin: 10px 0; }
    nav button {
      background: #ff0066; color: #fff; border: none; padding: 10px 20px;
      margin: 5px; border-radius: 20px; cursor: pointer;
      box-shadow: 0 0 10px #ff0066; transition: .3s;
    }
    nav button.active, nav button:hover { background: #ff3388; transform: scale(1.05); }
    .container { flex: 1; padding: 20px; overflow-y: auto; }
    section { display: none; }
    section.active { display: block; }
    .btn { background: #00aaff; color: #fff; border: none; padding: 10px 20px;
           border-radius: 20px; cursor: pointer; box-shadow: 0 0 10px #00aaff;
           transition: .3s; margin: 5px; }
    .btn:hover { background: #33bbff; transform: scale(1.05); }
    .option { display: block; background: #444; color: #fff; border: none;
              padding: 10px; margin: 8px auto; width: 80%; max-width: 400px;
              border-radius: 10px; cursor: pointer; transition: .2s; text-align: left; }
    .option:hover { background: rgba(255,255,255,0.1); }
    #feedback { margin-top: 20px; font-size: 1.2em; }
    #next { display: none; margin-top: 20px; }
    table { width: 90%; margin: 10px auto; border-collapse: collapse; }
    th, td { border: 1px solid #555; padding: 10px; text-align: center; }
    th { background: #222; }
    /* Progress and Timer */
    .progress-container { width: 80%; max-width: 500px; margin: 20px auto; }
    .progress-bar { width: 0%; height: 20px; background: #00ffe7; border-radius: 10px; }
    .timer { text-align: center; font-size: 1.2em; margin-top: 10px; }
  </style>
</head>
<body>  <header>
    <h1>بوابة الألعاب والاختبارات الموسعة</h1>
  </header>  <nav>
    <button data-tab="home" class="active">الرئيسية</button>
    <button data-tab="science">اختبار علمي</button>
    <button data-tab="religion">اختبار ديني (إسلامي)</button>
    <button data-tab="leaderboard">لوحة المتصدرين</button>
  </nav>  <div class="container">
    <!-- Home -->
    <section id="home" class="active">
      <p id="greeting"></p>
      <button class="btn" onclick="showTab('science')">ابدأ الاختبار العلمي</button>
      <button class="btn" onclick="showTab('religion')">ابدأ الاختبار الديني</button>
      <button class="btn" onclick="showTab('leaderboard')">عرض المتصدرين</button>
    </section><!-- Science Quiz -->
<section id="science">
  <h2>اختبار علمي</h2>
  <div class="progress-container"><div id="progress-sci" class="progress-bar"></div></div>
  <div id="q-science"></div>
  <div id="opts-science"></div>
  <div id="feedback-science"></div>
  <div class="timer" id="timer-sci"></div>
  <button id="next-science" class="btn">التالي</button>
</section>

<!-- Religion Quiz -->
<section id="religion">
  <h2>اختبار ديني (إسلامي سنة)</h2>
  <div class="progress-container"><div id="progress-rel" class="progress-bar"></div></div>
  <div id="q-religion"></div>
  <div id="opts-religion"></div>
  <div id="feedback-religion"></div>
  <div class="timer" id="timer-rel"></div>
  <button id="next-religion" class="btn">التالي</button>
</section>

<!-- Leaderboard -->
<section id="leaderboard">
  <h2>لوحة المتصدرين</h2>
  <h3>علمي</h3>
  <table><tr><th>اسم</th><th>نقاط</th></tr><tbody id="lb-sci"></tbody></table>
  <h3>ديني</h3>
  <table><tr><th>اسم</th><th>نقاط</th></tr><tbody id="lb-rel"></tbody></table>
</section>

  </div>  <footer>&copy; 2025 - Made with madness by ツ《👑》Ͳ３《شــيـخ》</footer><script>
  async function loadQuestions(file) {
    const res = await fetch(file);
    return res.ok ? res.json() : [];
  }

  // Load question banks (add as many as you want in these JSONs)
  let sciQ = [];
  let relQ = [];
  Promise.all([loadQuestions('science.json'), loadQuestions('religion.json')])
    .then(([sci, rel]) => { sciQ = sci; relQ = rel; initAll(); });

  // Initialize greeting and tabs
  let player = localStorage.getItem('playerName') || prompt('أدخل اسمك:') || 'ضيف';
  localStorage.setItem('playerName', player);
  document.getElementById('greeting').textContent = `مرحباً ${player}!`;

  document.querySelectorAll('nav button[data-tab]').forEach(btn=> btn.onclick = ()=> showTab(btn.dataset.tab));
  function showTab(tab) {
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
    document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
    if(tab === 'leaderboard') renderLB();
  }

  function initAll() {
    setupQuiz('science', sciQ);
    setupQuiz('religion', relQ);
  }

  function setupQuiz(prefix, questions) {
    let idx=0, sc=0, timer;
    const total = questions.length;
    const qEl = document.getElementById(`q-${prefix}`),
          oEl = document.getElementById(`opts-${prefix}`),
          fEl = document.getElementById(`feedback-${prefix}`),
          nBtn = document.getElementById(`next-${prefix}`),
          prog = document.getElementById(`progress-${prefix}`),
          timEl = document.getElementById(`timer-${prefix}`);

    function updateProgress() {
      prog.style.width = `${(idx/total)*100}%`;
    }
    function startTimer() {
      let t=20;
      timEl.textContent = `الوقت المتبقي: ${t} ثانية`;
      timer = setInterval(()=>{
        t--;
        timEl.textContent = `الوقت المتبقي: ${t} ثانية`;
        if(t<=0){ clearInterval(timer); showAnswer(-1); }
      },1000);
    }
    function showQ() {
      clearInterval(timer);
      updateProgress();
      startTimer();
      const it = questions[idx];
      qEl.textContent = `${idx+1}. ${it.q}`;
      oEl.innerHTML = '';
      it.opts.forEach((o,i)=>{
        const b = document.createElement('button');
        b.textContent = o; b.className = 'option';
        b.onclick = ()=> showAnswer(i);
        oEl.append(b);
      });
      fEl.textContent=''; nBtn.style.display='none';
    }
    function showAnswer(i) {
      clearInterval(timer);
      const it = questions[idx];
      if(i===it.a) { sc++; fEl.textContent='جوابك صحيح!'; }
      else fEl.textContent = `خاطئ، الإجابة الصحيحة: ${it.opts[it.a]}`;
      oEl.querySelectorAll('button').forEach(x=>x.disabled=true);
      nBtn.style.display = 'block';
    }
    nBtn.onclick = ()=> {
      idx++;
      if(idx<total) showQ();
      else finish();
    };
    showQ();

    function finish() {
      prog.style.width = '100%';
      qEl.textContent='انتهى الاختبار';
      oEl.innerHTML = `<p>نقاطك: ${sc}/${total}</p>`;
      fEl.textContent=''; nBtn.style.display='none'; timEl.textContent='';
      saveScore(prefix, sc);
    }
  }

  function saveScore(test, s) {
    const key = `lb_${test}`;
    let lb = JSON.parse(localStorage.getItem(key)||'{}');
    if(s > (lb[player]||0)) lb[player]=s;
    localStorage.setItem(key, JSON.stringify(lb));
  }

  function renderLB() {
    ['science','religion'].forEach(test=>{
      const key = `lb_${test}`, arr=Object.entries(JSON.parse(localStorage.getItem(key)||'{}')).sort((a,b)=>b[1]-a[1]);
      const body = document.getElementById(test==='science' ? 'lb-sci' : 'lb-rel');
      if(!arr.length) body.innerHTML = `<tr><td colspan="2">لا بيانات</td></tr>`;
      else body.innerHTML = arr.map(([n,s])=>`<tr><td>${n}</td><td>${s}</td></tr>`).join('');
    });
  }
</script></html>
