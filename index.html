<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ALSHIEK_الشـيــخ - الألعاب والاختبارات</title>
  <style>
    /* Reset */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom, #1c1c1c, #2b2b2b);
      color: #fff; direction: rtl;
    }
    header, footer { text-align: center; padding: 20px; }
    header h1 { font-size: 2.5em; color: #00ffe7; text-shadow: 0 0 10px #00ffe7; }
    nav { text-align: center; margin: 10px 0; }
    nav button {
      background: #ff0066; color: #fff; border: none; padding: 10px 20px;
      margin: 0 5px; border-radius: 20px; cursor: pointer;
      box-shadow: 0 0 10px #ff0066; transition: .3s;
    }
    nav button.active, nav button:hover { background: #ff3388; transform: scale(1.05); }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    .btn { background: #00aaff; color: #fff; border: none; padding: 10px 20px;
           border-radius: 20px; cursor: pointer; box-shadow: 0 0 10px #00aaff;
           transition: .3s; margin: 5px; }
    .btn:hover { background: #33bbff; transform: scale(1.05); }
    .option { display: block; background: #444; color: #fff; border: none;
              padding: 10px; margin: 8px auto; width: 80%; max-width: 400px;
              border-radius: 10px; cursor: pointer; transition: .2s; text-align: left; }
    .option:hover { background: rgba(255,255,255,0.1); }
    #feedback { margin-top: 20px; font-size: 1.2em; }
    #next { display: none; margin-top: 20px; }
    table { width: 90%; margin: 10px auto; border-collapse: collapse; }
    th, td { border: 1px solid #555; padding: 10px; text-align: center; }
    th { background: #222; }
    #admin-panel { display: none; position: fixed; top:0; left:0; width:100%; height:100%;
                   background: rgba(0,0,0,0.9); color:#fff; overflow:auto; padding:20px; }
    #admin-panel h2 { margin-bottom: 10px; }
    #admin-panel .section { margin-bottom: 20px; border-bottom:1px solid #555; padding-bottom: 15px; }
    #admin-panel label { display: block; margin: 5px 0; text-align: left; }
    #admin-panel input, #admin-panel textarea, #admin-panel select {
      width: 100%; padding:8px; margin-bottom:10px; background:#333; border:1px solid #555; color:#fff;
    }
    #admin-panel button { margin:5px 0; padding:8px 16px; }
  </style>
</head>
<body>

  <header>
    <h1>بوابة الألعاب والاختبارات</h1>
  </header>

  <nav>
    <button data-tab="home" class="active">الرئيسية</button>
    <button data-tab="science">اختبار علمي</button>
    <button data-tab="religion">اختبار ديني</button>
    <button data-tab="leaderboard">لوحة المتصدرين</button>
    <button id="open-admin">لوحة الأدمن</button>
  </nav>

  <!-- Home -->
  <section id="home" class="active">
    <p id="greeting"></p>
    <button class="btn" onclick="showTab('science')">ابدأ الاختبار العلمي</button>
    <button class="btn" onclick="showTab('religion')">ابدأ الاختبار الديني</button>
    <button class="btn" onclick="showTab('leaderboard')">عرض المتصدرين</button>
  </section>

  <!-- Science Quiz -->
  <section id="science">
    <h2>اختبار علمي</h2>
    <div id="q-science"></div>
    <div id="opts-science"></div>
    <div id="fb-science"></div>
    <button id="next-science">السؤال التالي</button>
  </section>

  <!-- Religion Quiz -->
  <section id="religion">
    <h2>اختبار ديني</h2>
    <div id="q-religion"></div>
    <div id="opts-religion"></div>
    <div id="fb-religion"></div>
    <button id="next-religion">السؤال التالي</button>
  </section>

  <!-- Leaderboard -->
  <section id="leaderboard">
    <h2>لوحة المتصدرين</h2>
    <h3>علمي</h3>
    <table><tr><th>اسم</th><th>نقاط</th></tr><tbody id="lb-sci"></tbody></table>
    <h3>ديني</h3>
    <table><tr><th>اسم</th><th>نقاط</th></tr><tbody id="lb-rel"></tbody></table>
  </section>

  <!-- Admin Panel -->
  <div id="admin-panel">
    <h2>لوحة الأدمن</h2>
    <div class="section" id="admin-auth">
      <label>كلمة سر الأدمن:</label>
      <input type="password" id="admin-pass">
      <button onclick="loginAdmin()">دخول</button>
    </div>
    <div class="section" id="admin-controls" style="display:none;">
      <h3>حظر/فك حظر مستخدم</h3>
      <label>ID المستخدم:</label><input type="text" id="ban-id">
      <label>مدة الحظر (دقائق):</label><input type="number" id="ban-min" value="60">
      <button onclick="banUser()">حظر</button>
      <br>
      <label>ID المستخدم:</label><input type="text" id="unban-id">
      <button onclick="unbanUser()">فك الحظر</button>

      <h3>إرسال رسالة</h3>
      <label>ID المستخدم:</label><input type="text" id="msg-id">
      <label>المحتوى:</label><textarea id="msg-txt"></textarea>
      <label>عدد المرات:</label><input type="number" id="msg-times" value="1">
      <button onclick="sendMessage()">إرسال</button>

      <h3>وضع الصيانة</h3>
      <label>الحالة:</label>
      <select id="maint-mode"><option value="off">إيقاف</option><option value="on">تشغيل</option></select>
      <label>المدة (دقائق):</label><input type="number" id="maint-min" value="30">
      <button onclick="applyMaintenance()">تطبيق</button>

      <h3>منح صلاحية أدمن</h3>
      <label>ID المستخدم:</label><input type="text" id="grant-id">
      <button onclick="grantAdmin()">منح</button>

      <h3>تعديل نقاط</h3>
      <label>ID المستخدم:</label><input type="text" id="score-id">
      <label>النقاط الجديدة:</label><input type="number" id="score-val">
      <button onclick="updateScoreAdmin()">تحديث</button>

      <button onclick="closeAdmin()">خروج</button>
    </div>
  </div>

  <footer>&copy; 2025 - Made with madness by ツ《👑》Ͳ３《شــيـخ》</footer>

<script>
  // Name prompt
  let player = localStorage.getItem('playerName');
  if(!player) {
    player = prompt('أدخل اسمك للعبة الاختبارات:') || 'ضيف';
    localStorage.setItem('playerName', player);
  }
  document.getElementById('greeting').textContent = `مرحباً ${player}!`;

  // Tab switching
  document.querySelectorAll('nav button[data-tab]').forEach(btn=>{
    btn.onclick = ()=> showTab(btn.dataset.tab);
  });
  function showTab(tab) {
    document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
    document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
    document.querySelectorAll('section').forEach(sec=>sec.classList.remove('active'));
    document.getElementById(tab).classList.add('active');
  }

  // Quiz data
  const sciQ = [
    {q:'أقرب كوكب للشمس؟', opts:['الزهرة','عطارد','المريخ','المشتري'], a:1},
    {q:'الوحدة الأساسية للمادة؟', opts:['بروتون','جزيء','ذرة','إلكترون'], a:2},
    {q:'سرعة الضوء؟', opts:['300,000km/s','150,000km/s','30,000km/s','3,000km/s'], a:0}
  ];
  const relQ = [
    {q:'عدد أركان الإسلام؟', opts:['3','4','5','6'], a:2},
    {q:'أول سورة نزلت؟', opts:['الفاتحة','العلق','الفرقان','الأنعام'], a:1},
    {q:'ليلة القدر؟', opts:['شوال','رمضان','ذو الحجة','شعبان'], a:1}
  ];

  // Generic quiz engine
  function setupQuiz(prefix, questions) {
    let idx=0, sc=0;
    const qEl = document.getElementById(`q-${prefix}`),
          oEl = document.getElementById(`opts-${prefix}`),
          fEl = document.getElementById(`fb-${prefix}`),
          nBtn= document.getElementById(`next-${prefix}`);
    function showQ(){
      const it = questions[idx];
      qEl.textContent = it.q;
      oEl.innerHTML = '';
      it.opts.forEach((o,i)=>{
        const b=document.createElement('button');
        b.textContent=o; b.className='option';
        b.onclick=()=>{ if(i===it.a) sc++; fEl.textContent = i===it.a?'جوابك صحيح':'جوابك خطأ';
          oEl.querySelectorAll('button').forEach(x=>x.disabled=true);
          nBtn.style.display='inline-block';
        };
        oEl.append(b);
      });
      fEl.textContent=''; nBtn.style.display='none';
    }
    nBtn.onclick=()=>{
      idx++;
      if(idx<questions.length) showQ();
      else finish();
    };
    function finish(){
      qEl.textContent='انتهى الاختبار';
      oEl.innerHTML = `<p>نقاطك: ${sc}/${questions.length}</p>`;
      nBtn.style.display='none';
      saveScore(prefix, sc);
    }
    showQ();
  }
  function saveScore(test, s){
    const key = `lb_${test}`;
    let lb = JSON.parse(localStorage.getItem(key)||'{}');
    if(s > (lb[player]||0)) lb[player]=s;
    localStorage.setItem(key, JSON.stringify(lb));
  }
  setupQuiz('science', sciQ);
  setupQuiz('religion', relQ);

  // Leaderboard
  function renderLB(key, tbodyId){
    const lb = JSON.parse(localStorage.getItem(`lb_${key}`)||'{}'),
          arr = Object.entries(lb).sort((a,b)=>b[1]-a[1]),
          body= document.getElementById(tbodyId);
    if(!arr.length) body.innerHTML=`<tr><td colspan="2">لا بيانات</td></tr>`;
    else body.innerHTML = arr.map(([n,s])=>`<tr><td>${n}</td><td>${s}</td></tr>`).join('');
  }
  renderLB('science','lb-sci');
  renderLB('religion','lb-rel');

  // Admin panel
  const panel = document.getElementById('admin-panel'),
        auth = document.getElementById('admin-auth'),
        ctrls = document.getElementById('admin-controls');
  document.getElementById('open-admin').onclick = ()=> panel.style.display='block';
  function loginAdmin(){
    if(document.getElementById('admin-pass').value==='admin123'){
      auth.style.display='none'; ctrls.style.display='block';
    } else alert('كلمة السر خاطئة');
  }
  function banUser(){
    const id=document.getElementById('ban-id').value,
          m= +document.getElementById('ban-min').value;
    localStorage.setItem(`ban_${id}`, Date.now()+m*60000);
    alert('تم حظر '+id);
  }
  function unbanUser(){
    const id=document.getElementById('unban-id').value;
    localStorage.removeItem(`ban_${id}`);
    alert('فك الحظر '+id);
  }
  function sendMessage(){
    const id=document.getElementById('msg-id').value,
          txt=document.getElementById('msg-txt').value,
          t= +document.getElementById('msg-times').value;
    for(let i=0;i<t;i++) console.log(`Message to ${id}: ${txt}`);
    alert('تم الإرسال');
  }
  function applyMaintenance(){
    const mode=document.getElementById('maint-mode').value,
          m=+document.getElementById('maint-min').value;
    localStorage.setItem('maint', mode);
    if(mode==='on') setTimeout(()=> localStorage.setItem('maint','off'), m*60000);
    alert('تم تطبيق الصيانة');
  }
  if(localStorage.getItem('maint')==='on'){
    document.body.innerHTML='<h1 style="text-align:center;margin-top:50px;">الموقع تحت الصيانة</h1>';
  }
  function grantAdmin(){
    const id=document.getElementById('grant-id').value;
    localStorage.setItem(`admin_${id}`, 'true');
    alert('منح صلاحية أدمن لـ '+id);
  }
  function updateScoreAdmin(){
    const id=document.getElementById('score-id').value,
          v=+document.getElementById('score-val').value;
    let lb = JSON.parse(localStorage.getItem('lb_science')||'{}');
    lb[id] = v; localStorage.setItem('lb_science', JSON.stringify(lb));
    lb = JSON.parse(localStorage.getItem('lb_religion')||'{}');
    lb[id] = v; localStorage.setItem('lb_religion', JSON.stringify(lb));
    alert('تم تحديث النقاط');
  }
  function closeAdmin(){ panel.style.display='none'; auth.style.display='block'; ctrls.style.display='none'; }
</script>

</body>
</html>
